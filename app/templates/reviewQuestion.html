
{% extends "layout.html" %}
 
{% block head %}
<script src="{{ url_for('static', filename='js/tinymce.min.js') }}"></script>
<script>
        tinymce.init(
        {
            selector:'textarea',
            plugins: "code image media", 
            forced_root_block : "", 
            force_br_newlines : true,
            force_p_newlines : false,
            toolbar: "code | undo redo | styleselect | pre bold italic | image",
            setup: function(ed) 
            {
                ed.on('keydown', function(evt) {
                {
                    console.debug('Key down event: ' + evt.keyCode);
                    if (evt.keyCode == 9)
                    {
                      ed.execCommand('mceInsertContent', false, '&emsp;&emsp;');
                      evt.preventDefault();
                    }
                }});
                ed.addButton('pre', 
                {
                    title: "Pre", 
                    text: "<pre>",
                    onclick : function()
                    {
                        ed.focus(); 
                        ed.formatter.toggle("pre");
                    } 
                })
            }
        });
$(document).ready(
    function() 
    {                      
                $.post(
                    $SCRIPT_ROOT+"/gatherSimilarQuestionsFromTags",
                    { tags: "{{questionToDisplay.tags}}", questionID: {{questionToDisplay.id}}, quiz: {{questionToDisplay.quiz}} }
                    )
                  .done( function(data, status) {
                      $("#similar_questions").html(data);

                  }).fail( function(xhr, textStatus, errorThrown) {
                      $("#similar_questions").text(xhr.responseText);
                  });
    } 
)
</script>

{% endblock %}
 
{% block content %}

<table width="100%">
	<tr>
		<td width="50%"> 
		<form method="post" action="reviewQuestion?questionID={{questionToDisplay.id}}" class="well span6">
			{{form.hidden_tag()}} 
			<div class="control-group">
				<label class="control-label" for="quiz"> Quiz: </label> {{questionToDisplay.quiz}} 
			</div>
			<div class="span6">
				<div class="control-group">
					<label class="control-label" for="tags"> Tags: </label> {{questionToDisplay.tags}} {{form.tagsComments(rows=rowCountsToDisplay['tagsComments'],cols=100,placeholder="Comments on Tags")}} <br />
				</div>
				<div class="control-group">
					<label class="control-label" for="instructions"> Instructions: </label> {{questionToDisplay.instructions}} {{form.instructionsComments(rows=rowCountsToDisplay['instructionsComments'],cols=100,placeholder="Comments on Instructions")}} <br />
				</div>
				<div class="control-group">
					<label class="control-label" for="question"> Question: </label> {{questionToDisplay.question}} {{form.questionComments(rows=rowCountsToDisplay['questionComments'],cols=100,placeholder="Comments on Questions")}} <br />
				</div>
				<div class="control-group">
					<label class="control-label" for="examples"> Examples: </label> {{questionToDisplay.examples}} {{form.examplesComments(rows=rowCountsToDisplay['examplesComments'],cols=100,placeholder="Comments on Examples")}} <br />
				</div>
				<div class="control-group">
					<label class="control-label" for="hints"> Hints/Cautions/etc.: </label> {{questionToDisplay.hints}} {{form.hintsComments(rows=rowCountsToDisplay['hintsComments'],cols=100,placeholder="Comments on Hints/Cautions/etc.")}} <br />
				</div>
				<div class="control-group">
					<label class="control-label" for="answer"> Answer: </label> {{questionToDisplay.answer}} {{form.answerComments(rows=rowCountsToDisplay['answerComments'],cols=100,placeholder="Comments on Answers")}} <br />
				</div>
				<table table-striped table-hover>
                    {% for reviewer in questionToDisplay.reviewers %}
                        <tr>
                            <td><label class="control-label" for="reviewed1">Reviewed by:&nbsp;</label>{{reviewer.fullname}}</td>
                            <td>&lt;{{reviewer.email}}&gt;</td>
                            <td>&nbsp;
                                {% if reviewersSaidOKToDisplay[loop.index] %}
                                 <span class="glyphicon glyphicon-ok"> </span> 
                                {% else %}
                                 <span class="glyphicon glyphicon-thumbs-down"> </span> 
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
				</table>
				<br> <br />
				<button type="submit" class="btn btn-success center" name='button' value="good"> Looks Good </button> <button type="submit" class="btn btn-warning center" name='button' value="needswork"> Needs Work </button> 
			</form>
			</td>
			<td style="vertical-align:top;" td width="50%"> 
			<h3>
				Similar Questions 
			</h3>
			<div class="tabbable" id="similar_questions">
			</div>
			</td>
		</tr>
	</table>
	
{% endblock %}
 